<!DOCTYPE html>
<!-- saved from url=(0129)file:///Users/nanzhu/Documents/TA@McGill/COMP535_2015_FALL/simulate_link_state_routing_protocol_with_java_socket_programming.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<style>
h1,
h2,
h3,
h4,
h5,
h6,
p,
blockquote {
    margin: 0;
    padding: 0;
}
body {
    font-family: "Helvetica Neue", Helvetica, "Hiragino Sans GB", Arial, sans-serif;
    font-size: 13px;
    line-height: 18px;
    color: #737373;
    background-color: white;
    margin: 10px 13px 10px 13px;
}
table {
	margin: 10px 0 15px 0;
	border-collapse: collapse;
}
td,th {	
	border: 1px solid #ddd;
	padding: 3px 10px;
}
th {
	padding: 5px 10px;	
}

a {
    color: #0069d6;
}
a:hover {
    color: #0050a3;
    text-decoration: none;
}
a img {
    border: none;
}
p {
    margin-bottom: 9px;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    color: #404040;
    line-height: 36px;
}
h1 {
    margin-bottom: 18px;
    font-size: 30px;
}
h2 {
    font-size: 24px;
}
h3 {
    font-size: 18px;
}
h4 {
    font-size: 16px;
}
h5 {
    font-size: 14px;
}
h6 {
    font-size: 13px;
}
hr {
    margin: 0 0 19px;
    border: 0;
    border-bottom: 1px solid #ccc;
}
blockquote {
    padding: 13px 13px 21px 15px;
    margin-bottom: 18px;
    font-family:georgia,serif;
    font-style: italic;
}
blockquote:before {
    content:"\201C";
    font-size:40px;
    margin-left:-10px;
    font-family:georgia,serif;
    color:#eee;
}
blockquote p {
    font-size: 14px;
    font-weight: 300;
    line-height: 18px;
    margin-bottom: 0;
    font-style: italic;
}
code, pre {
    font-family: Monaco, Andale Mono, Courier New, monospace;
}
code {
    background-color: #fee9cc;
    color: rgba(0, 0, 0, 0.75);
    padding: 1px 3px;
    font-size: 12px;
    -webkit-border-radius: 3px;
    -moz-border-radius: 3px;
    border-radius: 3px;
}
pre {
    display: block;
    padding: 14px;
    margin: 0 0 18px;
    line-height: 16px;
    font-size: 11px;
    border: 1px solid #d9d9d9;
    white-space: pre-wrap;
    word-wrap: break-word;
}
pre code {
    background-color: #fff;
    color:#737373;
    font-size: 11px;
    padding: 0;
}
sup {
    font-size: 0.83em;
    vertical-align: super;
    line-height: 0;
}
* {
	-webkit-print-color-adjust: exact;
}
@media screen and (min-width: 914px) {
    body {
        width: 854px;
        margin:10px auto;
    }
}
@media print {
	body,code,pre code,h1,h2,h3,h4,h5,h6 {
		color: black;
	}
	table, pre {
		page-break-inside: avoid;
	}
}
</style>
<title>Simulate Link State Routing Protocol with Java Socket Programming</title>

</head>
<body>
<h1>Simulate Link State Routing Protocol with Java Socket Programming</h1>

<h2>Goal</h2>

<p>In this project, you are supposed to develop a pure user-space program which simulates the major functionalities of a routing device running Link State Routing protocol.</p>

<p>To simulate the real-world network environment, you have to start multiple instances of the program, each of which connecting with (some of) others via socket. Each program instance represents a router or host in the simulated network space; Correspondingly, the links connecting the routers/hosts and the IP addresses identifying the routers/hosts are simulated by the in-memory data structures.</p>

<p>By defining the format of the messages transmitting between the program instances, the parser and the handlers of these messages, you simulate the routing protocol with the user-space processes.</p>

<h2>Prerequest</h2>

<p>Before you do this PA, please ensure that you understand the basic concept of routing, especially Link State Routing, which is taught in class.</p>

<p>Recommended Reading: <a href="http://cseweb.ucsd.edu/classes/fa11/cse123-a/123f11_Lec10.pdf">Link State Routing</a></p>

<h2>Socket Programming 101</h2>

<p>Socket is the interface between the application layer and tranmission layer <img src="./Simulate Link State Routing Protocol with Java Socket Programming_files/socket.png" height="280" width="480" alt="socket">.</p>

<p>The existence of Socket interface greatly reduce the complexity of the developing network-based applications. When the processes communicate via socket, they usually fall into two categories of roles, <code>server</code> and <code>client</code>. The usage of socket in these two roles are different.</p>

<p><img src="./Simulate Link State Routing Protocol with Java Socket Programming_files/socket_co.jpg" height="250" width="480" alt="socket_co">.</p>

<p>In <code>server</code> side, the program create a socket instance by calling <code>socket()</code>. With this socket instance, you can <code>bind()</code> it to a specific IP address and port, call <code>listen()</code> for waiting to active connections, <code>accept()</code> to accept the connection. After you call <code>accept()</code>, you can then call <code>recv()</code> and <code>send()</code> to transmit data between the client and itself. After you finish all tasks, you can call <code>close()</code> to shutdown the socket.</p>

<p>In <code>client</code> side, the story seems a bit simpler, after you call <code>socket()</code> to create a socket instance, you only need to call <code>connect()</code> with the specified IP address and port number to request service from the server side. After the connection is established, the following process is very similar to server side, i.e. transmit data with <code>recv()</code> and <code>send()</code> and shutdown with <code>close()</code>.</p>

<p>This is the general process of socket-based communication. To understand it better, you are suggested to read the article in <a href="http://gnosis.cx/publish/programming/sockets.html">here</a>. The article is described in C programming language, which exposes many details of network data transmission but helpful to understand the concept.</p>

<h3>Java Socket Programming</h3>

<p>Different programming languages offers their own abstraction over socket programming. You are requestd to finish this project in Java. Java provides higher level abstraction for socket. In server side, You only need to call <code>ServerSocketserverSocket = new ServerSocket(port);</code> to create socket, bind, listen in one shot. In client side, <code>Socket client = new Socket(serverName, port);</code> creates socket instance and connect to the remote server.</p>

<p>The data tranmission between the server and client is through stream. For example, the following code snippet writes data to remote server and wait for the feedback.</p>

<pre><code>         OutputStream outToServer = client.getOutputStream();
         DataOutputStream out =
                       new DataOutputStream(outToServer);

         out.writeUTF("Hello from "
                      + client.getLocalSocketAddress());
         InputStream inFromServer = client.getInputStream();
         DataInputStream in =
                        new DataInputStream(inFromServer);
         System.out.println("Server says " + in.readUTF());
</code></pre>

<p>Here we say <code>wait for the feedback</code>, because <code>getInputStream().read()</code> is a blocking method. According to the Java API, "This method blocks until input data is available, the end of the stream is detected, or an exception is thrown." (<a href="http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html#read(">Blocking Read</a>)).</p>

<p>This is not a good thing for high-throughput scenarios, e.g. routers. We have to develop some way to handle concurrent socket requests.</p>

<p>Recommended Reading: <a href="http://www.tutorialspoint.com/java/java_networking.htm">Java Socket Programming</a></p>

<h3>Handle Concurrent Socket Requests</h3>

<p>In this project, you are supposed to develop a multi-threaded server to handle concurrent socket requests from the client. Recommended Reading: <a href="http://www.mysamplecode.com/2011/12/java-multithreaded-socket-server.html">Multi-threaded Java Server</a></p>

<h2>Simulation of Link State Routing</h2>

<p>The basic idea of link state routing is that every router maintains its own description of the connectivity of the complete network. As a result, each router can calculates the next best hop for all possible destinations in the network. The key point in Link State Routing Protocol is to synchronize the network description in all nodes (In this project, we only consider a single LAN deployment).</p>

<p>In the following paragraphs, we will describe your tasks in this project in details.</p>

<h3>Router Design</h3>

<p>The first task in this project is to design the <code>Router</code> class which represents a router instance in the simulated network.</p>

<p>Each router is identified by a simulated "IP address", it is simply a String variable. In this project, the routers is assumed to have 4 ports, which means that the router class contains a 4-length, <code>Link</code> typed array. When the router is connected with the other, you shall fill the array with a Link object. If the ports are all occupied, the connection shall not be established.</p>

<p>The most important component in router side is the <code>Link State Database</code>. Each router maintains its own <code>Link State Database</code> which is essentially a map from router IP address and the neighborhood description which is originated by the corresponding router. The shortest path algorithm is ran over this database.</p>

<p>Besides the components introduced above, you have to develop a terminal for the router. When you start the router program, the terminal interface (command line based) should popup, and it allows the user to input following commands:</p>

<ul>
<li><p>detect [IP Address]: output the routing path from this router to the destination router which is identified by [IP Address].</p></li>
<li><p>attach [IP Address]: establish a connection to the remote router which is identified by [IP Address]</p></li>
<li><p>disconnect [IP Address]: disconnect the connection between this router and the remote router which is identified by [IP Address]</p></li>
<li><p>start: start this router and initialize the database synchronization process</p></li>
<li><p>quit: disconnect all connections to others and quit the program</p></li>
</ul>


<p>The above commands all trigger the Link State Database update and synchronization, which we will introduce in the next section.</p>

<h3>Link State Database Synchronization and Update</h3>

<h3>Shortest Path Finding</h3>

<h2>Evaluation</h2>

</body></html>